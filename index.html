<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>공정 다이어그램 시각화</title>
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</head>

<body>
<header class="header">
    <div class="title">데이터 기반 공정 다이어그램 시각화</div>
    <div class="actions">
        <button id="btn-edit">공정 데이터 수정</button>
        <button id="btn-print">PDF 출력</button>
    </div>
</header>

<main class="layout">
    <!-- 메인 다이어그램 영역 -->
    <section class="main-panel">
        <div class="main-panel-inner">
            <div class="page-title-row">
                <div>
                    <h1 class="page-title">공정 다이어그램</h1>
                    <p class="page-subtitle">
                        공정 · 세부공정 · 설비 흐름을 한눈에 확인하는 시각화 도구입니다.
                    </p>
                </div>
            </div>

            <!-- 통계 + 현재 버전 정보 -->
            <div class="info-bar">
                <div class="info-badges">
            <span class="badge">
              공정 <strong id="info-process-count">0</strong>개
            </span>
                    <span class="badge">
              세부공정 <strong id="info-sub-count">0</strong>개
            </span>
                    <span class="badge">
              설비 <strong id="info-eqp-count">0</strong>개
            </span>
                </div>
                <div class="info-version">
                    <span class="info-label">현재 버전</span>
                    <span id="current-version-label" class="info-version-text"></span>
                </div>
            </div>

            <!-- 다이어그램 카드 -->
            <div class="diagram-card">
                <div id="diagram-wrapper">
                    <div id="diagram"></div>
                </div>
            </div>

            <!-- 하단 안내 -->
            <div class="hint-text">
                공정 데이터를 수정하려면 오른쪽 상단의 <b>“공정 데이터 수정”</b> 버튼을 눌러주세요.
            </div>
        </div>
    </section>

    <!-- 우측 버전 목록 -->
    <aside class="version-panel">
        <h3>버전 기록</h3>
        <ul id="version-list"></ul>
    </aside>
</main>

<!-- 공정/세부공정/설비 GUI 편집 팝업 -->
<div id="modal-backdrop" class="modal-backdrop hidden">
    <div class="modal">
        <h3>공정 데이터 수정</h3>

        <div class="field-row">
            <label>공정 목록</label>
            <button type="button" id="btn-add-process">공정 추가</button>
        </div>

        <div id="editor-processes"></div>

        <div class="modal-actions">
            <button id="btn-save-version">버전 저장</button>
            <button id="btn-cancel-modal">취소</button>
        </div>
    </div>
</div>

<!-- script -->
<script src="js/storage.js"></script>
<script src="js/mermaid-builder.js"></script>
<script src="js/render.js"></script>
<script src="js/main.js"></script>
</body>
</html>
